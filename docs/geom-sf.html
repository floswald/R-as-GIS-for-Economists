<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8.1 Creating maps from sf objects | R as GIS for Economists</title>
  <meta name="description" content="This is a book for Economists who regularly use spatial datasets for their econometric work." />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="8.1 Creating maps from sf objects | R as GIS for Economists" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a book for Economists who regularly use spatial datasets for their econometric work." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8.1 Creating maps from sf objects | R as GIS for Economists" />
  
  <meta name="twitter:description" content="This is a book for Economists who regularly use spatial datasets for their econometric work." />
  

<meta name="author" content="Taro Mieno" />


<meta name="date" content="2022-04-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="before-you-start-7.html"/>
<link rel="next" href="geom-raster.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.21/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R as GIS for Economists</a></li>

<li class="divider"></li>
<li><a href="index.html#welcome">Welcome<span></span></a></li>
<li><a href="preface.html#preface">Preface<span></span></a>
<ul>
<li><a href="why-r-as-gis-for-economists.html#why-r-as-gis-for-economists">Why R as GIS for Economists?<span></span></a>
<ul>
<li><a href="why-r-as-gis-for-economists.html#r-vs-python">R vs Python<span></span></a></li>
<li><a href="why-r-as-gis-for-economists.html#r-vs-arcgis-or-qgis">R vs ArcGIS or QGIS<span></span></a></li>
<li><a href="why-r-as-gis-for-economists.html#summary">Summary<span></span></a></li>
</ul></li>
<li><a href="how-is-this-book-different-from-other-online-books-and-resources.html#how-is-this-book-different-from-other-online-books-and-resources">How is this book different from other online books and resources?<span></span></a></li>
<li><a href="topics-covered-in-this-book.html#topics-covered-in-this-book">Topics covered in this book<span></span></a></li>
<li><a href="conventions-of-the-book-and-some-notes.html#conventions-of-the-book-and-some-notes">Conventions of the book and some notes<span></span></a>
<ul>
<li><a href="conventions-of-the-book-and-some-notes.html#texts-in-gray-boxes">Texts in gray boxes<span></span></a></li>
<li><a href="conventions-of-the-book-and-some-notes.html#colored-boxes">Colored Boxes<span></span></a></li>
<li><a href="conventions-of-the-book-and-some-notes.html#parentheses-around-codes">Parentheses around codes<span></span></a></li>
<li><a href="conventions-of-the-book-and-some-notes.html#footnotes">Footnotes<span></span></a></li>
</ul></li>
<li><a href="session-information.html#session-information">Session Information<span></span></a></li>
</ul></li>
<li class="part"><span><b>I Demonstration<span></span></b></span></li>
<li class="chapter" data-level="1" data-path="demo.html"><a href="demo.html"><i class="fa fa-check"></i><b>1</b> R as GIS: Demonstrations<span></span></a>
<ul>
<li><a href="before-you-start.html#before-you-start">Before you start<span></span></a>
<ul>
<li><a href="before-you-start.html#target-audience">Target Audience<span></span></a></li>
<li><a href="before-you-start.html#direction-for-replication">Direction for replication<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.1" data-path="Demo1.html"><a href="Demo1.html"><i class="fa fa-check"></i><b>1.1</b> Demonstration 1: The impact of groundwater pumping on depth to water table<span></span></a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="Demo1.html"><a href="Demo1.html#project-overview"><i class="fa fa-check"></i><b>1.1.1</b> Project Overview<span></span></a></li>
<li class="chapter" data-level="1.1.2" data-path="Demo1.html"><a href="Demo1.html#project-demonstration"><i class="fa fa-check"></i><b>1.1.2</b> Project Demonstration<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="demonstration-2-precision-agriculture.html"><a href="demonstration-2-precision-agriculture.html"><i class="fa fa-check"></i><b>1.2</b> Demonstration 2: Precision Agriculture<span></span></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="demonstration-2-precision-agriculture.html"><a href="demonstration-2-precision-agriculture.html#project-overview-1"><i class="fa fa-check"></i><b>1.2.1</b> Project Overview<span></span></a></li>
<li class="chapter" data-level="1.2.2" data-path="demonstration-2-precision-agriculture.html"><a href="demonstration-2-precision-agriculture.html#project-demonstration-1"><i class="fa fa-check"></i><b>1.2.2</b> Project Demonstration<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="demo3.html"><a href="demo3.html"><i class="fa fa-check"></i><b>1.3</b> Demonstration 3: Land Use and Weather<span></span></a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="demo3.html"><a href="demo3.html#project-overview-2"><i class="fa fa-check"></i><b>1.3.1</b> Project Overview<span></span></a></li>
<li class="chapter" data-level="1.3.2" data-path="demo3.html"><a href="demo3.html#project-demonstration-2"><i class="fa fa-check"></i><b>1.3.2</b> Project Demonstration<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="demo4.html"><a href="demo4.html"><i class="fa fa-check"></i><b>1.4</b> Demonstration 4: The Impact of Railroad Presence on Corn Planted Acreage<span></span></a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="demo4.html"><a href="demo4.html#project-overview-3"><i class="fa fa-check"></i><b>1.4.1</b> Project Overview<span></span></a></li>
<li class="chapter" data-level="1.4.2" data-path="demo4.html"><a href="demo4.html#project-demonstration-3"><i class="fa fa-check"></i><b>1.4.2</b> Project Demonstration<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="demonstration-5-groundwater-use-for-agricultural-irrigation.html"><a href="demonstration-5-groundwater-use-for-agricultural-irrigation.html"><i class="fa fa-check"></i><b>1.5</b> Demonstration 5: Groundwater use for agricultural irrigation<span></span></a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="demonstration-5-groundwater-use-for-agricultural-irrigation.html"><a href="demonstration-5-groundwater-use-for-agricultural-irrigation.html#project-overview-4"><i class="fa fa-check"></i><b>1.5.1</b> Project Overview<span></span></a></li>
<li class="chapter" data-level="1.5.2" data-path="demonstration-5-groundwater-use-for-agricultural-irrigation.html"><a href="demonstration-5-groundwater-use-for-agricultural-irrigation.html#project-demonstration-4"><i class="fa fa-check"></i><b>1.5.2</b> Project Demonstration<span></span></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Foundations<span></span></b></span></li>
<li class="chapter" data-level="2" data-path="vector-basics.html"><a href="vector-basics.html"><i class="fa fa-check"></i><b>2</b> Vector Data Handling with <code>sf</code><span></span></a>
<ul>
<li><a href="before-you-start-1.html#before-you-start-1">Before you start<span></span></a>
<ul>
<li><a href="before-you-start-1.html#sf-or-sp"><code>sf</code> or <code>sp</code>?<span></span></a></li>
<li><a href="before-you-start-1.html#direction-for-replication-1">Direction for replication<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.1" data-path="spatial-data-structure.html"><a href="spatial-data-structure.html"><i class="fa fa-check"></i><b>2.1</b> Spatial Data Structure<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="simple-feature-geometry-simple-feature-geometry-list-column-and-simple-feature.html"><a href="simple-feature-geometry-simple-feature-geometry-list-column-and-simple-feature.html"><i class="fa fa-check"></i><b>2.2</b> Simple feature geometry, simple feature geometry list-column, and simple feature<span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="simple-feature-geometry-simple-feature-geometry-list-column-and-simple-feature.html"><a href="simple-feature-geometry-simple-feature-geometry-list-column-and-simple-feature.html#simple-feature-geometry-sfg"><i class="fa fa-check"></i><b>2.2.1</b> Simple feature geometry (<code>sfg</code>)<span></span></a></li>
<li class="chapter" data-level="2.2.2" data-path="simple-feature-geometry-simple-feature-geometry-list-column-and-simple-feature.html"><a href="simple-feature-geometry-simple-feature-geometry-list-column-and-simple-feature.html#create-simple-feature-geometry-list-column-sfc-and-simple-feature-sf-from-scratch"><i class="fa fa-check"></i><b>2.2.2</b> Create simple feature geometry list-column (<code>sfc</code>) and simple feature (<code>sf</code>) from scratch<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="reading-and-writing-vector-data.html"><a href="reading-and-writing-vector-data.html"><i class="fa fa-check"></i><b>2.3</b> Reading and writing vector data<span></span></a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="reading-and-writing-vector-data.html"><a href="reading-and-writing-vector-data.html#reading-a-shapefile"><i class="fa fa-check"></i><b>2.3.1</b> Reading a shapefile<span></span></a></li>
<li class="chapter" data-level="2.3.2" data-path="reading-and-writing-vector-data.html"><a href="reading-and-writing-vector-data.html#writing-to-a-shapefile"><i class="fa fa-check"></i><b>2.3.2</b> Writing to a shapefile<span></span></a></li>
<li class="chapter" data-level="2.3.3" data-path="reading-and-writing-vector-data.html"><a href="reading-and-writing-vector-data.html#better-alternatives"><i class="fa fa-check"></i><b>2.3.3</b> Better alternatives<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="projection-with-a-different-coordinate-reference-systems.html"><a href="projection-with-a-different-coordinate-reference-systems.html"><i class="fa fa-check"></i><b>2.4</b> Projection with a different Coordinate Reference Systems<span></span></a></li>
<li class="chapter" data-level="2.5" data-path="quick-and-interactive-view-of-an-sf-object.html"><a href="quick-and-interactive-view-of-an-sf-object.html"><i class="fa fa-check"></i><b>2.5</b> Quick and interactive view of an <code>sf</code> object<span></span></a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="quick-and-interactive-view-of-an-sf-object.html"><a href="quick-and-interactive-view-of-an-sf-object.html#quick-view"><i class="fa fa-check"></i><b>2.5.1</b> Quick view<span></span></a></li>
<li class="chapter" data-level="2.5.2" data-path="quick-and-interactive-view-of-an-sf-object.html"><a href="quick-and-interactive-view-of-an-sf-object.html#interactive-view"><i class="fa fa-check"></i><b>2.5.2</b> Interactive view<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="turning-a-data.frame-of-points-into-an-sf.html"><a href="turning-a-data.frame-of-points-into-an-sf.html"><i class="fa fa-check"></i><b>2.6</b> Turning a data.frame of points into an <code>sf</code><span></span></a></li>
<li class="chapter" data-level="2.7" data-path="conv_sp.html"><a href="conv_sp.html"><i class="fa fa-check"></i><b>2.7</b> Conversion to and from sp objects<span></span></a></li>
<li class="chapter" data-level="2.8" data-path="non-spatial-transformation-of-sf.html"><a href="non-spatial-transformation-of-sf.html"><i class="fa fa-check"></i><b>2.8</b> Non-spatial transformation of <code>sf</code><span></span></a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="non-spatial-transformation-of-sf.html"><a href="non-spatial-transformation-of-sf.html#using-dplyr"><i class="fa fa-check"></i><b>2.8.1</b> Using <code>dplyr</code><span></span></a></li>
<li class="chapter" data-level="2.8.2" data-path="non-spatial-transformation-of-sf.html"><a href="non-spatial-transformation-of-sf.html#using-data.table"><i class="fa fa-check"></i><b>2.8.2</b> Using <code>data.table</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="non-interactive-geometrical-operations.html"><a href="non-interactive-geometrical-operations.html"><i class="fa fa-check"></i><b>2.9</b> Non-interactive geometrical operations<span></span></a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="non-interactive-geometrical-operations.html"><a href="non-interactive-geometrical-operations.html#st_buffer"><i class="fa fa-check"></i><b>2.9.1</b> st_buffer<span></span></a></li>
<li class="chapter" data-level="2.9.2" data-path="non-interactive-geometrical-operations.html"><a href="non-interactive-geometrical-operations.html#st_area"><i class="fa fa-check"></i><b>2.9.2</b> st_area<span></span></a></li>
<li class="chapter" data-level="2.9.3" data-path="non-interactive-geometrical-operations.html"><a href="non-interactive-geometrical-operations.html#st_centroid"><i class="fa fa-check"></i><b>2.9.3</b> st_centroid<span></span></a></li>
<li class="chapter" data-level="2.9.4" data-path="non-interactive-geometrical-operations.html"><a href="non-interactive-geometrical-operations.html#st_length"><i class="fa fa-check"></i><b>2.9.4</b> st_length<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="int-vv.html"><a href="int-vv.html"><i class="fa fa-check"></i><b>3</b> Spatial Interactions of Vector Data: Subsetting and Joining<span></span></a>
<ul>
<li><a href="before-you-start-2.html#before-you-start-2">Before you start<span></span></a>
<ul>
<li><a href="before-you-start-2.html#direction-for-replication-2">Direction for replication<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.1" data-path="topo.html"><a href="topo.html"><i class="fa fa-check"></i><b>3.1</b> Topological relations<span></span></a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="topo.html"><a href="topo.html#st_intersects"><i class="fa fa-check"></i><b>3.1.1</b> st_intersects()<span></span></a></li>
<li class="chapter" data-level="3.1.2" data-path="topo.html"><a href="topo.html#st_is_within_distance"><i class="fa fa-check"></i><b>3.1.2</b> st_is_within_distance()<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="spatial-subsetting-or-flagging.html"><a href="spatial-subsetting-or-flagging.html"><i class="fa fa-check"></i><b>3.2</b> Spatial Subsetting (or Flagging)<span></span></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="spatial-subsetting-or-flagging.html"><a href="spatial-subsetting-or-flagging.html#polygons-source-vs-polygons-target"><i class="fa fa-check"></i><b>3.2.1</b> polygons (source) vs polygons (target)<span></span></a></li>
<li class="chapter" data-level="3.2.2" data-path="spatial-subsetting-or-flagging.html"><a href="spatial-subsetting-or-flagging.html#points-source-vs-polygons-target"><i class="fa fa-check"></i><b>3.2.2</b> points (source) vs polygons (target)<span></span></a></li>
<li class="chapter" data-level="3.2.3" data-path="spatial-subsetting-or-flagging.html"><a href="spatial-subsetting-or-flagging.html#lines_polygons"><i class="fa fa-check"></i><b>3.2.3</b> lines (source) vs polygons (target)<span></span></a></li>
<li class="chapter" data-level="3.2.4" data-path="spatial-subsetting-or-flagging.html"><a href="spatial-subsetting-or-flagging.html#polygons_points"><i class="fa fa-check"></i><b>3.2.4</b> polygons (source) vs points (target)<span></span></a></li>
<li class="chapter" data-level="3.2.5" data-path="spatial-subsetting-or-flagging.html"><a href="spatial-subsetting-or-flagging.html#subsetting-to-a-geographic-extent-bounding-box"><i class="fa fa-check"></i><b>3.2.5</b> Subsetting to a geographic extent (bounding box)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="sp-join.html"><a href="sp-join.html"><i class="fa fa-check"></i><b>3.3</b> Spatial Join<span></span></a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="sp-join.html"><a href="sp-join.html#case-1-points-target-vs-polygons-source"><i class="fa fa-check"></i><b>3.3.1</b> Case 1: points (target) vs polygons (source)<span></span></a></li>
<li class="chapter" data-level="3.3.2" data-path="sp-join.html"><a href="sp-join.html#case-2-polygons-target-vs-points-source"><i class="fa fa-check"></i><b>3.3.2</b> Case 2: polygons (target) vs points (source)<span></span></a></li>
<li class="chapter" data-level="3.3.3" data-path="sp-join.html"><a href="sp-join.html#polygon-polygon"><i class="fa fa-check"></i><b>3.3.3</b> Case 3: polygons (target) vs polygons (source)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="spatial-intersection-cropping-join.html"><a href="spatial-intersection-cropping-join.html"><i class="fa fa-check"></i><b>3.4</b> Spatial Intersection (cropping join)<span></span></a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="spatial-intersection-cropping-join.html"><a href="spatial-intersection-cropping-join.html#st-intersection"><i class="fa fa-check"></i><b>3.4.1</b> <code>st_intersection()</code><span></span></a></li>
<li class="chapter" data-level="3.4.2" data-path="spatial-intersection-cropping-join.html"><a href="spatial-intersection-cropping-join.html#area-weighted-average"><i class="fa fa-check"></i><b>3.4.2</b> Area-weighted average<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="raster-basics.html"><a href="raster-basics.html"><i class="fa fa-check"></i><b>4</b> Raster Data Handling<span></span></a>
<ul>
<li><a href="before-you-start-3.html#before-you-start-3">Before you start<span></span></a>
<ul>
<li><a href="before-you-start-3.html#direction-for-replication-3">Direction for replication<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.1" data-path="raster-data-object-classes.html"><a href="raster-data-object-classes.html"><i class="fa fa-check"></i><b>4.1</b> Raster data object classes<span></span></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="raster-data-object-classes.html"><a href="raster-data-object-classes.html#raster-package-rasterlayer-rasterstack-and-rasterbrick"><i class="fa fa-check"></i><b>4.1.1</b> <code>raster</code> package: <code>RasterLayer</code>, <code>RasterStack</code>, and <code>RasterBrick</code><span></span></a></li>
<li class="chapter" data-level="4.1.2" data-path="raster-data-object-classes.html"><a href="raster-data-object-classes.html#terra-package-spatraster"><i class="fa fa-check"></i><b>4.1.2</b> <code>terra</code> package: <code>SpatRaster</code><span></span></a></li>
<li class="chapter" data-level="4.1.3" data-path="raster-data-object-classes.html"><a href="raster-data-object-classes.html#converting-a-spatraster-object-to-a-raster-object."><i class="fa fa-check"></i><b>4.1.3</b> Converting a <code>SpatRaster</code> object to a <code>Raster</code><span class="math inline">\(^*\)</span> object.<span></span></a></li>
<li class="chapter" data-level="4.1.4" data-path="raster-data-object-classes.html"><a href="raster-data-object-classes.html#vector-data-in-the-terra-package"><i class="fa fa-check"></i><b>4.1.4</b> Vector data in the <code>terra</code> package<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="read-and-write-a-raster-data-file.html"><a href="read-and-write-a-raster-data-file.html"><i class="fa fa-check"></i><b>4.2</b> Read and write a raster data file<span></span></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="read-and-write-a-raster-data-file.html"><a href="read-and-write-a-raster-data-file.html#read-raster-files"><i class="fa fa-check"></i><b>4.2.1</b> Read raster file(s)<span></span></a></li>
<li class="chapter" data-level="4.2.2" data-path="read-and-write-a-raster-data-file.html"><a href="read-and-write-a-raster-data-file.html#write-raster-files"><i class="fa fa-check"></i><b>4.2.2</b> Write raster files<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="extract-information-from-raster-data-object.html"><a href="extract-information-from-raster-data-object.html"><i class="fa fa-check"></i><b>4.3</b> Extract information from raster data object<span></span></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="extract-information-from-raster-data-object.html"><a href="extract-information-from-raster-data-object.html#get-crs"><i class="fa fa-check"></i><b>4.3.1</b> Get CRS<span></span></a></li>
<li class="chapter" data-level="4.3.2" data-path="extract-information-from-raster-data-object.html"><a href="extract-information-from-raster-data-object.html#subset"><i class="fa fa-check"></i><b>4.3.2</b> Subset<span></span></a></li>
<li class="chapter" data-level="4.3.3" data-path="extract-information-from-raster-data-object.html"><a href="extract-information-from-raster-data-object.html#get-cell-values"><i class="fa fa-check"></i><b>4.3.3</b> Get cell values<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="turning-a-raster-object-into-a-data.html"><a href="turning-a-raster-object-into-a-data.html"><i class="fa fa-check"></i><b>4.4</b> Turning a raster object into a <code>data.frame</code><span></span></a></li>
<li class="chapter" data-level="4.5" data-path="quick-visualization.html"><a href="quick-visualization.html"><i class="fa fa-check"></i><b>4.5</b> Quick visualization<span></span></a></li>
<li class="chapter" data-level="4.6" data-path="work-with-netcdf.html"><a href="work-with-netcdf.html"><i class="fa fa-check"></i><b>4.6</b> Working with netCDFs<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="int-RV.html"><a href="int-RV.html"><i class="fa fa-check"></i><b>5</b> Spatial Interactions of Vector and Raster Data<span></span></a>
<ul>
<li><a href="before-you-start-4.html#before-you-start-4">Before you start<span></span></a>
<ul>
<li><a href="before-you-start-4.html#direction-for-replication-4">Direction for replication<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.1" data-path="raster-crop.html"><a href="raster-crop.html"><i class="fa fa-check"></i><b>5.1</b> Cropping to the Area of Interest<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="extracting-values-from-raster-layers-for-vector-data.html"><a href="extracting-values-from-raster-layers-for-vector-data.html"><i class="fa fa-check"></i><b>5.2</b> Extracting Values from Raster Layers for Vector Data<span></span></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="extracting-values-from-raster-layers-for-vector-data.html"><a href="extracting-values-from-raster-layers-for-vector-data.html#simple-visual-illustrations-of-raster-data-extraction"><i class="fa fa-check"></i><b>5.2.1</b> Simple visual illustrations of raster data extraction<span></span></a></li>
<li class="chapter" data-level="5.2.2" data-path="extracting-values-from-raster-layers-for-vector-data.html"><a href="extracting-values-from-raster-layers-for-vector-data.html#extracting-to-points"><i class="fa fa-check"></i><b>5.2.2</b> Extracting to Points<span></span></a></li>
<li class="chapter" data-level="5.2.3" data-path="extracting-values-from-raster-layers-for-vector-data.html"><a href="extracting-values-from-raster-layers-for-vector-data.html#extracting-to-polygons-terra-way"><i class="fa fa-check"></i><b>5.2.3</b> Extracting to Polygons (<code>terra</code> way)<span></span></a></li>
<li class="chapter" data-level="5.2.4" data-path="extracting-values-from-raster-layers-for-vector-data.html"><a href="extracting-values-from-raster-layers-for-vector-data.html#extracting-to-polygons-exactextractr-way"><i class="fa fa-check"></i><b>5.2.4</b> Extracting to Polygons (<code>exactextractr</code> way)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="extract-speed.html"><a href="extract-speed.html"><i class="fa fa-check"></i><b>5.3</b> Extraction speed comparison<span></span></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="extract-speed.html"><a href="extract-speed.html#points-terraextract-and-rasterextract"><i class="fa fa-check"></i><b>5.3.1</b> Points: <code>terra::extract()</code> and <code>raster::extract()</code><span></span></a></li>
<li class="chapter" data-level="5.3.2" data-path="extract-speed.html"><a href="extract-speed.html#polygons-exact_extract-terraextract-and-rasterextract"><i class="fa fa-check"></i><b>5.3.2</b> Polygons: <code>exact_extract()</code>, <code>terra::extract()</code>, and <code>raster::extract()</code><span></span></a></li>
<li class="chapter" data-level="5.3.3" data-path="extract-speed.html"><a href="extract-speed.html#single-layer-vs-multi-layer"><i class="fa fa-check"></i><b>5.3.3</b> Single-layer vs multi-layer<span></span></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III (slightly) Advanced Topics<span></span></b></span></li>
<li class="chapter" data-level="6" data-path="EE.html"><a href="EE.html"><i class="fa fa-check"></i><b>6</b> Extraction Speed Considerations<span></span></a>
<ul>
<li><a href="before-you-start-5.html#before-you-start-5">Before you start<span></span></a>
<ul>
<li><a href="before-you-start-5.html#direction-for-replication-5">Direction for replication<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.1" data-path="single-raster-layer.html"><a href="single-raster-layer.html"><i class="fa fa-check"></i><b>6.1</b> Single raster layer<span></span></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="single-raster-layer.html"><a href="single-raster-layer.html#datasets"><i class="fa fa-check"></i><b>6.1.1</b> Datasets<span></span></a></li>
<li class="chapter" data-level="6.1.2" data-path="single-raster-layer.html"><a href="single-raster-layer.html#parallelization"><i class="fa fa-check"></i><b>6.1.2</b> Parallelization<span></span></a></li>
<li class="chapter" data-level="6.1.3" data-path="single-raster-layer.html"><a href="single-raster-layer.html#summary-1"><i class="fa fa-check"></i><b>6.1.3</b> Summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="many-multi-layer.html"><a href="many-multi-layer.html"><i class="fa fa-check"></i><b>6.2</b> Many multi-layer raster files<span></span></a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="many-multi-layer.html"><a href="many-multi-layer.html#datasets-1"><i class="fa fa-check"></i><b>6.2.1</b> Datasets<span></span></a></li>
<li class="chapter" data-level="6.2.2" data-path="many-multi-layer.html"><a href="many-multi-layer.html#non-par-ext-multi"><i class="fa fa-check"></i><b>6.2.2</b> Non-parallelized extraction<span></span></a></li>
<li class="chapter" data-level="6.2.3" data-path="many-multi-layer.html"><a href="many-multi-layer.html#approach-1-parallelize-over-polygons-and-do-regular-loop-over-year-month"><i class="fa fa-check"></i><b>6.2.3</b> Approach 1: parallelize over polygons and do regular loop over year-month<span></span></a></li>
<li class="chapter" data-level="6.2.4" data-path="many-multi-layer.html"><a href="many-multi-layer.html#approach-2-parallelize-over-the-temporal-dimension-year-month"><i class="fa fa-check"></i><b>6.2.4</b> Approach 2: parallelize over the temporal dimension (year-month)<span></span></a></li>
<li class="chapter" data-level="6.2.5" data-path="many-multi-layer.html"><a href="many-multi-layer.html#memory-consideration"><i class="fa fa-check"></i><b>6.2.5</b> Memory consideration<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="stars-basics.html"><a href="stars-basics.html"><i class="fa fa-check"></i><b>7</b> Spatiotemporal Raster Data Handling with <code>stars</code><span></span></a>
<ul>
<li><a href="before-you-start-6.html#before-you-start-6">Before you start<span></span></a>
<ul>
<li><a href="before-you-start-6.html#direction-for-replication-6">Direction for replication<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.1" data-path="stars-structure.html"><a href="stars-structure.html"><i class="fa fa-check"></i><b>7.1</b> Understanding the structure of a <code>stars</code> object<span></span></a></li>
<li class="chapter" data-level="7.2" data-path="some-basic-operations-on-stars-objects.html"><a href="some-basic-operations-on-stars-objects.html"><i class="fa fa-check"></i><b>7.2</b> Some basic operations on <code>stars</code> objects<span></span></a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="some-basic-operations-on-stars-objects.html"><a href="some-basic-operations-on-stars-objects.html#subset-a-stars-object-by-index"><i class="fa fa-check"></i><b>7.2.1</b> Subset a <code>stars</code> object by index<span></span></a></li>
<li class="chapter" data-level="7.2.2" data-path="some-basic-operations-on-stars-objects.html"><a href="some-basic-operations-on-stars-objects.html#set-attribute-names"><i class="fa fa-check"></i><b>7.2.2</b> Set attribute names<span></span></a></li>
<li class="chapter" data-level="7.2.3" data-path="some-basic-operations-on-stars-objects.html"><a href="some-basic-operations-on-stars-objects.html#get-the-coordinate-reference-system"><i class="fa fa-check"></i><b>7.2.3</b> Get the coordinate reference system<span></span></a></li>
<li class="chapter" data-level="7.2.4" data-path="some-basic-operations-on-stars-objects.html"><a href="some-basic-operations-on-stars-objects.html#get-the-dimension-characteristics-and-values"><i class="fa fa-check"></i><b>7.2.4</b> Get the dimension characteristics and values<span></span></a></li>
<li class="chapter" data-level="7.2.5" data-path="some-basic-operations-on-stars-objects.html"><a href="some-basic-operations-on-stars-objects.html#attributes-to-dimensions-and-vice-versa"><i class="fa fa-check"></i><b>7.2.5</b> Attributes to dimensions, and vice versa<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="quick-visualization-for-exploration.html"><a href="quick-visualization-for-exploration.html"><i class="fa fa-check"></i><b>7.3</b> Quick visualization for exploration<span></span></a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="quick-visualization-for-exploration.html"><a href="quick-visualization-for-exploration.html#quick-static-map"><i class="fa fa-check"></i><b>7.3.1</b> quick static map<span></span></a></li>
<li class="chapter" data-level="7.3.2" data-path="quick-visualization-for-exploration.html"><a href="quick-visualization-for-exploration.html#interactive-map"><i class="fa fa-check"></i><b>7.3.2</b> interactive map<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="read-write-stars.html"><a href="read-write-stars.html"><i class="fa fa-check"></i><b>7.4</b> Reading and writing raster data<span></span></a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="read-write-stars.html"><a href="read-write-stars.html#reading-raster-data"><i class="fa fa-check"></i><b>7.4.1</b> Reading raster data<span></span></a></li>
<li class="chapter" data-level="7.4.2" data-path="read-write-stars.html"><a href="read-write-stars.html#writing-a-stars-object-to-a-file"><i class="fa fa-check"></i><b>7.4.2</b> Writing a <code>stars</code> object to a file<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="stars-set-time.html"><a href="stars-set-time.html"><i class="fa fa-check"></i><b>7.5</b> Setting the time dimension manually<span></span></a></li>
<li class="chapter" data-level="7.6" data-path="dplyr-op.html"><a href="dplyr-op.html"><i class="fa fa-check"></i><b>7.6</b> <code>dplyr</code>-like operations<span></span></a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="dplyr-op.html"><a href="dplyr-op.html#filter"><i class="fa fa-check"></i><b>7.6.1</b> <code>filter()</code><span></span></a></li>
<li class="chapter" data-level="7.6.2" data-path="dplyr-op.html"><a href="dplyr-op.html#select"><i class="fa fa-check"></i><b>7.6.2</b> <code>select()</code><span></span></a></li>
<li class="chapter" data-level="7.6.3" data-path="dplyr-op.html"><a href="dplyr-op.html#mutate"><i class="fa fa-check"></i><b>7.6.3</b> <code>mutate()</code><span></span></a></li>
<li class="chapter" data-level="7.6.4" data-path="dplyr-op.html"><a href="dplyr-op.html#pull"><i class="fa fa-check"></i><b>7.6.4</b> <code>pull()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="merging-stars-objects-using-c-and-st_mosaic.html"><a href="merging-stars-objects-using-c-and-st_mosaic.html"><i class="fa fa-check"></i><b>7.7</b> Merging <code>stars</code> objects using <code>c()</code> and <code>st_mosaic()</code><span></span></a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="merging-stars-objects-using-c-and-st_mosaic.html"><a href="merging-stars-objects-using-c-and-st_mosaic.html#merging-stars-objects-along-the-third-dimension-band"><i class="fa fa-check"></i><b>7.7.1</b> Merging <code>stars</code> objects along the third dimension (band)<span></span></a></li>
<li class="chapter" data-level="7.7.2" data-path="merging-stars-objects-using-c-and-st_mosaic.html"><a href="merging-stars-objects-using-c-and-st_mosaic.html#merge-two"><i class="fa fa-check"></i><b>7.7.2</b> Merging <code>stars</code> objects of different attributes<span></span></a></li>
<li class="chapter" data-level="7.7.3" data-path="merging-stars-objects-using-c-and-st_mosaic.html"><a href="merging-stars-objects-using-c-and-st_mosaic.html#merging-stars-objects-of-different-spatial-extents"><i class="fa fa-check"></i><b>7.7.3</b> Merging <code>stars</code> objects of different spatial extents<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="convert-to-rb.html"><a href="convert-to-rb.html"><i class="fa fa-check"></i><b>7.8</b> Convert from and to <code>Raster</code><span class="math inline">\(^*\)</span> or <code>SpatRaster</code> objects<span></span></a></li>
</ul></li>
<li class="part"><span><b>IV Extensions<span></span></b></span></li>
<li class="chapter" data-level="8" data-path="create-maps.html"><a href="create-maps.html"><i class="fa fa-check"></i><b>8</b> Creating Maps using <code>ggplot2</code><span></span></a>
<ul>
<li><a href="before-you-start-7.html#before-you-start-7">Before you start<span></span></a>
<ul>
<li><a href="before-you-start-7.html#direction-for-replication-7">Direction for replication<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.1" data-path="geom-sf.html"><a href="geom-sf.html"><i class="fa fa-check"></i><b>8.1</b> Creating maps from <code>sf</code> objects<span></span></a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="geom-sf.html"><a href="geom-sf.html#datasets-2"><i class="fa fa-check"></i><b>8.1.1</b> Datasets<span></span></a></li>
<li class="chapter" data-level="8.1.2" data-path="geom-sf.html"><a href="geom-sf.html#basic-usage-of-geom_sf"><i class="fa fa-check"></i><b>8.1.2</b> Basic usage of <code>geom_sf()</code><span></span></a></li>
<li class="chapter" data-level="8.1.3" data-path="geom-sf.html"><a href="geom-sf.html#specifying-the-aesthetics"><i class="fa fa-check"></i><b>8.1.3</b> Specifying the aesthetics<span></span></a></li>
<li class="chapter" data-level="8.1.4" data-path="geom-sf.html"><a href="geom-sf.html#plotting-multiple-spatial-objects-in-one-figure"><i class="fa fa-check"></i><b>8.1.4</b> Plotting multiple spatial objects in one figure<span></span></a></li>
<li class="chapter" data-level="8.1.5" data-path="geom-sf.html"><a href="geom-sf.html#crs"><i class="fa fa-check"></i><b>8.1.5</b> CRS<span></span></a></li>
<li class="chapter" data-level="8.1.6" data-path="geom-sf.html"><a href="geom-sf.html#faceting"><i class="fa fa-check"></i><b>8.1.6</b> Faceting<span></span></a></li>
<li class="chapter" data-level="8.1.7" data-path="geom-sf.html"><a href="geom-sf.html#adding-texts-labels-on-a-map"><i class="fa fa-check"></i><b>8.1.7</b> Adding texts (labels) on a map<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="geom-raster.html"><a href="geom-raster.html"><i class="fa fa-check"></i><b>8.2</b> Raster data visualization: <code>geom_raster()</code> and <code>geom_stars()</code><span></span></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="geom-raster.html"><a href="geom-raster.html#visualize-raster-with-geom_raster"><i class="fa fa-check"></i><b>8.2.1</b> Visualize <code>Raster</code><span class="math inline">\(^*\)</span> with <code>geom_raster()</code><span></span></a></li>
<li class="chapter" data-level="8.2.2" data-path="geom-raster.html"><a href="geom-raster.html#visualize-stars-with-geom_raster"><i class="fa fa-check"></i><b>8.2.2</b> Visualize <code>stars</code> with <code>geom_raster()</code><span></span></a></li>
<li class="chapter" data-level="8.2.3" data-path="geom-raster.html"><a href="geom-raster.html#visualize-stars-with-geom_stars"><i class="fa fa-check"></i><b>8.2.3</b> Visualize <code>stars</code> with <code>geom_stars()</code><span></span></a></li>
<li class="chapter" data-level="8.2.4" data-path="geom-raster.html"><a href="geom-raster.html#adding-geom_sf-layers"><i class="fa fa-check"></i><b>8.2.4</b> adding <code>geom_sf()</code> layers<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="color-scale.html"><a href="color-scale.html"><i class="fa fa-check"></i><b>8.3</b> Color scale<span></span></a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="color-scale.html"><a href="color-scale.html#viridis-color-maps"><i class="fa fa-check"></i><b>8.3.1</b> Viridis color maps<span></span></a></li>
<li class="chapter" data-level="8.3.2" data-path="color-scale.html"><a href="color-scale.html#rcolorbrewer-scale__distiller-and-scale__brewer"><i class="fa fa-check"></i><b>8.3.2</b> <code>RColorBrewer</code>: <code>scale_*_distiller()</code> and <code>scale_*_brewer()</code><span></span></a></li>
<li class="chapter" data-level="8.3.3" data-path="color-scale.html"><a href="color-scale.html#colorspace-package"><i class="fa fa-check"></i><b>8.3.3</b> <code>colorspace</code> package<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="arranging-maps.html"><a href="arranging-maps.html"><i class="fa fa-check"></i><b>8.4</b> Arranging maps<span></span></a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="arranging-maps.html"><a href="arranging-maps.html#multiple-panels-of-figures-as-a-single-figure"><i class="fa fa-check"></i><b>8.4.1</b> Multiple panels of figures as a single figure<span></span></a></li>
<li class="chapter" data-level="8.4.2" data-path="arranging-maps.html"><a href="arranging-maps.html#a-map-in-a-map-inset"><i class="fa fa-check"></i><b>8.4.2</b> A map in a map: inset<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="fine-tune.html"><a href="fine-tune.html"><i class="fa fa-check"></i><b>8.5</b> Fine-tuning maps for publication<span></span></a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="fine-tune.html"><a href="fine-tune.html#theme"><i class="fa fa-check"></i><b>8.5.1</b> Setting the theme<span></span></a></li>
<li class="chapter" data-level="8.5.2" data-path="fine-tune.html"><a href="fine-tune.html#legend"><i class="fa fa-check"></i><b>8.5.2</b> Legend<span></span></a></li>
<li class="chapter" data-level="8.5.3" data-path="fine-tune.html"><a href="fine-tune.html#facet-strips"><i class="fa fa-check"></i><b>8.5.3</b> Facet strips<span></span></a></li>
<li class="chapter" data-level="8.5.4" data-path="fine-tune.html"><a href="fine-tune.html#north-arrow-and-scale-bar"><i class="fa fa-check"></i><b>8.5.4</b> North arrow and scale bar<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="ggsave.html"><a href="ggsave.html"><i class="fa fa-check"></i><b>8.6</b> Saving a <code>ggplot</code> object as an image<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="download-data.html"><a href="download-data.html"><i class="fa fa-check"></i><b>9</b> Download and process spatial datasets from within R<span></span></a>
<ul>
<li><a href="before-you-start-8.html#before-you-start-8">Before you start<span></span></a>
<ul>
<li><a href="before-you-start-8.html#direction-for-replication-8">Direction for replication<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.1" data-path="nass-quick.html"><a href="nass-quick.html"><i class="fa fa-check"></i><b>9.1</b> USDA NASS QuickStat with <code>tidyUSDA</code><span></span></a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="nass-quick.html"><a href="nass-quick.html#look-for-parameter-values"><i class="fa fa-check"></i><b>9.1.1</b> Look for parameter values<span></span></a></li>
<li class="chapter" data-level="9.1.2" data-path="nass-quick.html"><a href="nass-quick.html#caveats"><i class="fa fa-check"></i><b>9.1.2</b> Caveats<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="CropScapeR.html"><a href="CropScapeR.html"><i class="fa fa-check"></i><b>9.2</b> CDL with <code>CropScapeR</code><span></span></a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="CropScapeR.html"><a href="CropScapeR.html#getcdldata-download-the-cdl-data-as-raster-data"><i class="fa fa-check"></i><b>9.2.1</b> <code>GetCDLData</code>: Download the CDL data as raster data<span></span></a></li>
<li class="chapter" data-level="9.2.2" data-path="CropScapeR.html"><a href="CropScapeR.html#data-processing-after-downloading-data"><i class="fa fa-check"></i><b>9.2.2</b> Data processing after downloading data<span></span></a></li>
<li class="chapter" data-level="9.2.3" data-path="CropScapeR.html"><a href="CropScapeR.html#other-forms-of-cdl-data"><i class="fa fa-check"></i><b>9.2.3</b> Other forms of CDL data<span></span></a></li>
<li class="chapter" data-level="9.2.4" data-path="CropScapeR.html"><a href="CropScapeR.html#mac-problem"><i class="fa fa-check"></i><b>9.2.4</b> SSL certificate problem on Mac<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="download-prism.html"><a href="download-prism.html"><i class="fa fa-check"></i><b>9.3</b> PRISM with <code>prism</code><span></span></a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="download-prism.html"><a href="download-prism.html#basics"><i class="fa fa-check"></i><b>9.3.1</b> Basics<span></span></a></li>
<li class="chapter" data-level="9.3.2" data-path="download-prism.html"><a href="download-prism.html#download-daily-prism-data-for-many-years-and-build-your-own-datasets"><i class="fa fa-check"></i><b>9.3.2</b> Download daily PRISM data for many years and build your own datasets<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="daymet-with-daymetr-and-feddata.html"><a href="daymet-with-daymetr-and-feddata.html"><i class="fa fa-check"></i><b>9.4</b> Daymet with <code>daymetr</code> and <code>FedData</code><span></span></a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="daymet-with-daymetr-and-feddata.html"><a href="daymet-with-daymetr-and-feddata.html#for-points-data"><i class="fa fa-check"></i><b>9.4.1</b> For points data<span></span></a></li>
<li class="chapter" data-level="9.4.2" data-path="daymet-with-daymetr-and-feddata.html"><a href="daymet-with-daymetr-and-feddata.html#daymet-poly"><i class="fa fa-check"></i><b>9.4.2</b> For polygons data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="gridMET.html"><a href="gridMET.html"><i class="fa fa-check"></i><b>9.5</b> gridMET<span></span></a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="gridMET.html"><a href="gridMET.html#practical-examples"><i class="fa fa-check"></i><b>9.5.1</b> Practical Examples<span></span></a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix<span></span></b></span></li>
<li class="chapter" data-level="A" data-path="par-comp.html"><a href="par-comp.html"><i class="fa fa-check"></i><b>A</b> Loop and Parallel Computing<span></span></a>
<ul>
<li><a href="before-you-start-9.html#before-you-start-9">Before you start<span></span></a>
<ul>
<li><a href="before-you-start-9.html#direction-for-replication-9">Direction for replication<span></span></a></li>
<li><a href="before-you-start-9.html#packages-to-install-and-load">Packages to install and load<span></span></a></li>
</ul></li>
<li class="chapter" data-level="A.1" data-path="repetitive-processes-and-looping.html"><a href="repetitive-processes-and-looping.html"><i class="fa fa-check"></i><b>A.1</b> Repetitive processes and looping<span></span></a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="repetitive-processes-and-looping.html"><a href="repetitive-processes-and-looping.html#what-is-looping"><i class="fa fa-check"></i><b>A.1.1</b> What is looping?<span></span></a></li>
<li class="chapter" data-level="A.1.2" data-path="repetitive-processes-and-looping.html"><a href="repetitive-processes-and-looping.html#for-loop"><i class="fa fa-check"></i><b>A.1.2</b> For loop<span></span></a></li>
<li class="chapter" data-level="A.1.3" data-path="repetitive-processes-and-looping.html"><a href="repetitive-processes-and-looping.html#for-loop-using-the-lapply-function"><i class="fa fa-check"></i><b>A.1.3</b> For loop using the <code>lapply()</code> function<span></span></a></li>
<li class="chapter" data-level="A.1.4" data-path="repetitive-processes-and-looping.html"><a href="repetitive-processes-and-looping.html#looping-over-multiple-variables-using-lapply"><i class="fa fa-check"></i><b>A.1.4</b> Looping over multiple variables using lapply()<span></span></a></li>
<li class="chapter" data-level="A.1.5" data-path="repetitive-processes-and-looping.html"><a href="repetitive-processes-and-looping.html#do-you-really-need-to-loop"><i class="fa fa-check"></i><b>A.1.5</b> Do you really need to loop?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="parcomp.html"><a href="parcomp.html"><i class="fa fa-check"></i><b>A.2</b> Parallelization of embarrassingly parallel processes<span></span></a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="parcomp.html"><a href="parcomp.html#mac-or-linux-users"><i class="fa fa-check"></i><b>A.2.1</b> Mac or Linux users<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="ggplot2-minimals.html"><a href="ggplot2-minimals.html"><i class="fa fa-check"></i><b>B</b> ggplot2 minimals<span></span></a></li>
<li><a href="references.html#references">References<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R as GIS for Economists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<link href="style.css" rel="stylesheet" type="text/css">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-59758608-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-59758608-3');
</script>

<div id="geom-sf" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Creating maps from <code>sf</code> objects<a href="geom-sf.html#geom-sf" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section explains how to create maps from vector data stored as an <code>sf</code> object via <code>geom_sf()</code>.</p>
<div id="datasets-2" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Datasets<a href="geom-sf.html#datasets-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following datasets will be used for illustrations.</p>
<p><strong>Points</strong></p>
<ul>
<li><code>af_used</code>: total annual groundwater pumping at individual irrigation wells</li>
</ul>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="geom-sf.html#cb594-1" aria-hidden="true" tabindex="-1"></a><span class="co">#--- read in the KS wells data ---#</span></span>
<span id="cb594-2"><a href="geom-sf.html#cb594-2" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb594-3"><a href="geom-sf.html#cb594-3" aria-hidden="true" tabindex="-1"></a>  gw_KS_sf <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/gw_KS_sf.rds&quot;</span>)</span>
<span id="cb594-4"><a href="geom-sf.html#cb594-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Simple feature collection with 56225 features and 3 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -102.0495 ymin: 36.99561 xmax: -94.70746 ymax: 40.00191
Geodetic CRS:  NAD83
First 10 features:
   well_id year   af_used                   geometry
1        1 2010  67.00000 POINT (-100.4423 37.52046)
2        1 2011 171.00000 POINT (-100.4423 37.52046)
3        3 2010  30.93438 POINT (-100.7118 39.91526)
4        3 2011  12.00000 POINT (-100.7118 39.91526)
5        7 2010   0.00000 POINT (-101.8995 38.78077)
6        7 2011   0.00000 POINT (-101.8995 38.78077)
7       11 2010 154.00000 POINT (-101.7114 39.55035)
8       11 2011 160.00000 POINT (-101.7114 39.55035)
9       12 2010  28.17239 POINT (-95.97031 39.16121)
10      12 2011  89.53479 POINT (-95.97031 39.16121)</code></pre>
<p><strong>Polygons</strong></p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="geom-sf.html#cb596-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb596-2"><a href="geom-sf.html#cb596-2" aria-hidden="true" tabindex="-1"></a>  KS_county <span class="ot">&lt;-</span> tigris<span class="sc">::</span><span class="fu">counties</span>(<span class="at">state =</span> <span class="st">&quot;Kansas&quot;</span>, <span class="at">cb =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb596-3"><a href="geom-sf.html#cb596-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_as_sf</span>() <span class="sc">%&gt;%</span></span>
<span id="cb596-4"><a href="geom-sf.html#cb596-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_transform</span>(<span class="fu">st_crs</span>(gw_KS_sf))</span>
<span id="cb596-5"><a href="geom-sf.html#cb596-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Simple feature collection with 105 features and 12 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -102.0517 ymin: 36.99302 xmax: -94.58841 ymax: 40.00316
Geodetic CRS:  NAD83
First 10 features:
    STATEFP COUNTYFP COUNTYNS       AFFGEOID GEOID         NAME
48       20      075 00485327 0500000US20075 20075     Hamilton
210      20      149 00485038 0500000US20149 20149 Pottawatomie
211      20      003 00484971 0500000US20003 20003     Anderson
409      20      033 00484986 0500000US20033 20033     Comanche
415      20      189 00485056 0500000US20189 20189      Stevens
601      20      161 00485044 0500000US20161 20161        Riley
602      20      025 00484982 0500000US20025 20025        Clark
603      20      163 00485045 0500000US20163 20163        Rooks
810      20      091 00485010 0500000US20091 20091      Johnson
894      20      187 00485055 0500000US20187 20187      Stanton
               NAMELSAD STUSPS STATE_NAME LSAD      ALAND   AWATER
48      Hamilton County     KS     Kansas   06 2580958328  2893322
210 Pottawatomie County     KS     Kansas   06 2177507162 54149295
211     Anderson County     KS     Kansas   06 1501263686 10599981
409     Comanche County     KS     Kansas   06 2041681089  3604155
415      Stevens County     KS     Kansas   06 1883593926   464936
601        Riley County     KS     Kansas   06 1579116499 32002514
602        Clark County     KS     Kansas   06 2524300310  6603384
603        Rooks County     KS     Kansas   06 2306454194 11962259
810      Johnson County     KS     Kansas   06 1226694710 16303985
894      Stanton County     KS     Kansas   06 1762103387   178555
                          geometry
48  MULTIPOLYGON (((-102.0446 3...
210 MULTIPOLYGON (((-96.72833 3...
211 MULTIPOLYGON (((-95.51879 3...
409 MULTIPOLYGON (((-99.54467 3...
415 MULTIPOLYGON (((-101.5566 3...
601 MULTIPOLYGON (((-96.96095 3...
602 MULTIPOLYGON (((-100.1072 3...
603 MULTIPOLYGON (((-99.60527 3...
810 MULTIPOLYGON (((-95.05647 3...
894 MULTIPOLYGON (((-102.0419 3...</code></pre>
<p><strong>Lines</strong></p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="geom-sf.html#cb598-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb598-2"><a href="geom-sf.html#cb598-2" aria-hidden="true" tabindex="-1"></a>  KS_railroads <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">&quot;Data/&quot;</span>, <span class="at">layer =</span> <span class="st">&quot;tl_2015_us_rails&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb598-3"><a href="geom-sf.html#cb598-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_crop</span>(KS_county)</span>
<span id="cb598-4"><a href="geom-sf.html#cb598-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Simple feature collection with 5796 features and 3 fields
Geometry type: GEOMETRY
Dimension:     XY
Bounding box:  xmin: -102.0517 ymin: 36.99769 xmax: -94.58841 ymax: 40.06304
Geodetic CRS:  NAD83
First 10 features:
        LINEARID                         FULLNAME MTFCC
2124 11051038759                          Bnsf RR R1011
2136 11051038771                          Bnsf RR R1011
2141 11051038776                          Bnsf RR R1011
2186 11051047374                   Rock Island RR R1011
2240 11051048071  Burlington Northern Santa Fe RR R1011
2252 11051048083  Burlington Northern Santa Fe RR R1011
2256 11051048088  Burlington Northern Santa Fe RR R1011
2271 11051048170 Chicago Burlington and Quincy RR R1011
2272 11051048171 Chicago Burlington and Quincy RR R1011
2293 11051048193 Chicago Burlington and Quincy RR R1011
                           geometry
2124 LINESTRING (-94.58841 39.15...
2136 LINESTRING (-94.59017 39.11...
2141 LINESTRING (-94.58841 39.15...
2186 LINESTRING (-94.58893 39.11...
2240 LINESTRING (-94.58841 39.15...
2252 LINESTRING (-94.59017 39.11...
2256 LINESTRING (-94.58841 39.15...
2271 LINESTRING (-94.58862 39.15...
2272 LINESTRING (-94.58883 39.11...
2293 LINESTRING (-94.58871 39.11...</code></pre>
</div>
<div id="basic-usage-of-geom_sf" class="section level3 hasAnchor" number="8.1.2">
<h3><span class="header-section-number">8.1.2</span> Basic usage of <code>geom_sf()</code><a href="geom-sf.html#basic-usage-of-geom_sf" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>geom_sf()</code> allows for visualizing <code>sf</code> objects. Conveniently, <code>geom_sf()</code> automatically detects the geometry type of spatial objects stored in <code>sf</code> and draw maps accordingly. For example, the following codes create maps of Kansas wells (points), Kansas counties (polygons), and railroads in Kansas (lines):</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="geom-sf.html#cb600-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb600-2"><a href="geom-sf.html#cb600-2" aria-hidden="true" tabindex="-1"></a>  g_wells <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> gw_KS_sf) <span class="sc">+</span></span>
<span id="cb600-3"><a href="geom-sf.html#cb600-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>()</span>
<span id="cb600-4"><a href="geom-sf.html#cb600-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/wells-map-1.png" width="672" /></p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="geom-sf.html#cb601-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb601-2"><a href="geom-sf.html#cb601-2" aria-hidden="true" tabindex="-1"></a>  g_county <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> KS_county) <span class="sc">+</span></span>
<span id="cb601-3"><a href="geom-sf.html#cb601-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>()</span>
<span id="cb601-4"><a href="geom-sf.html#cb601-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/county-map-1.png" width="672" /></p>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="geom-sf.html#cb602-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb602-2"><a href="geom-sf.html#cb602-2" aria-hidden="true" tabindex="-1"></a>  g_rail <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> KS_railroads) <span class="sc">+</span></span>
<span id="cb602-3"><a href="geom-sf.html#cb602-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>()</span>
<span id="cb602-4"><a href="geom-sf.html#cb602-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/lines-map-1.png" width="672" /></p>
<p>As you can see, the different geometry types are handled by a single <code>geom</code> type, <code>geom_sf()</code>. Notice also that neither of the x-axis (longitude) and y-axis (latitude) is provided to <code>geom_sf()</code> in the example codes above. When you create a map, longitude and latitude are always used for x- and y-axis. <code>geom_sf()</code> is smart enough to know the geometry types and draw spatial objects accordingly.</p>
</div>
<div id="specifying-the-aesthetics" class="section level3 hasAnchor" number="8.1.3">
<h3><span class="header-section-number">8.1.3</span> Specifying the aesthetics<a href="geom-sf.html#specifying-the-aesthetics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are various aesthetics options you can use. Available aesthetics vary by the type of geometry. This section shows the basics of how to specify the aesthetics of maps. Finer control of aesthetics will be discussed later.</p>
<div id="points" class="section level4 hasAnchor" number="8.1.3.1">
<h4><span class="header-section-number">8.1.3.1</span> Points<a href="geom-sf.html#points" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>color</strong>: color of the points</li>
<li><strong>fill</strong>: available for some shapes (but likely useless)</li>
<li><strong>shape</strong>: shape of the points</li>
<li><strong>size</strong>: size of the points (rarely useful)</li>
</ul>
<p>For illustration here, let’s focus on the wells in one county so it is easy to detect the differences across various aesthetics configurations.</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="geom-sf.html#cb603-1" aria-hidden="true" tabindex="-1"></a><span class="co">#--- wells in Stevens County ---#</span></span>
<span id="cb603-2"><a href="geom-sf.html#cb603-2" aria-hidden="true" tabindex="-1"></a>gw_Stevens <span class="ot">&lt;-</span> KS_county <span class="sc">%&gt;%</span></span>
<span id="cb603-3"><a href="geom-sf.html#cb603-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(NAME <span class="sc">==</span> <span class="st">&quot;Stevens&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb603-4"><a href="geom-sf.html#cb603-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_crop</span>(gw_KS_sf, .)</span></code></pre></div>
<p><strong>example 1</strong></p>
<ul>
<li><strong>color</strong>: dependent on <code>af_used</code> (the amount of groundwater extraction)</li>
<li><strong>size</strong>: constant across the points (bigger than default)</li>
</ul>
<div class="sourceCode" id="cb604"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb604-1"><a href="geom-sf.html#cb604-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb604-2"><a href="geom-sf.html#cb604-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> gw_Stevens) <span class="sc">+</span></span>
<span id="cb604-3"><a href="geom-sf.html#cb604-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">color =</span> af_used), <span class="at">size =</span> <span class="dv">2</span>)</span>
<span id="cb604-4"><a href="geom-sf.html#cb604-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/wells-map-e1-1.png" width="672" /></p>
<p><strong>example 2</strong></p>
<ul>
<li><strong>color</strong>: constant across the points (blue)</li>
<li><strong>size</strong>: dependent on <code>af_used</code></li>
<li><strong>shape</strong>: constant across the points (square)</li>
</ul>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="geom-sf.html#cb605-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb605-2"><a href="geom-sf.html#cb605-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> gw_Stevens) <span class="sc">+</span></span>
<span id="cb605-3"><a href="geom-sf.html#cb605-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">size =</span> af_used), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">shape =</span> <span class="dv">15</span>)</span>
<span id="cb605-4"><a href="geom-sf.html#cb605-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/wells-map-e2-1.png" width="672" /></p>
<p><strong>example 3</strong></p>
<ul>
<li><strong>color</strong>: dependent on whether located east of west of -101.3 in longitude</li>
<li><strong>shape</strong>: dependent on whether located east of west of -101.3 in longitude</li>
</ul>
<div class="sourceCode" id="cb606"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb606-1"><a href="geom-sf.html#cb606-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb606-2"><a href="geom-sf.html#cb606-2" aria-hidden="true" tabindex="-1"></a>  gw_Stevens <span class="sc">%&gt;%</span></span>
<span id="cb606-3"><a href="geom-sf.html#cb606-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cbind</span>(., <span class="fu">st_coordinates</span>(.)) <span class="sc">%&gt;%</span></span>
<span id="cb606-4"><a href="geom-sf.html#cb606-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">east_west =</span> <span class="fu">ifelse</span>(X <span class="sc">&lt;</span> <span class="sc">-</span><span class="fl">101.3</span>, <span class="st">&quot;west&quot;</span>, <span class="st">&quot;east&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb606-5"><a href="geom-sf.html#cb606-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">data =</span> .) <span class="sc">+</span></span>
<span id="cb606-6"><a href="geom-sf.html#cb606-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">shape =</span> east_west, <span class="at">color =</span> east_west))</span>
<span id="cb606-7"><a href="geom-sf.html#cb606-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/wells-map-e3-1.png" width="672" /></p>
</div>
<div id="polygons" class="section level4 hasAnchor" number="8.1.3.2">
<h4><span class="header-section-number">8.1.3.2</span> Polygons<a href="geom-sf.html#polygons" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>color</strong>: color of the <strong>borders</strong> of the polygons</li>
<li><strong>fill</strong>: color of the <strong>inside</strong> of the polygons</li>
<li><strong>shape</strong>: not available</li>
<li><strong>size</strong>: not available</li>
</ul>
<p><strong>example 1</strong></p>
<ul>
<li><strong>color</strong>: constant (red)</li>
<li><strong>fill</strong>: constant (dark green)</li>
</ul>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="geom-sf.html#cb607-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> KS_county) <span class="sc">+</span></span>
<span id="cb607-2"><a href="geom-sf.html#cb607-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;darkgreen&quot;</span>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/county-map-e1-1.png" width="672" /></p>
<p><strong>example 2</strong></p>
<ul>
<li><strong>color</strong>: default (black)</li>
<li><strong>fill</strong>: dependent on the total amount of pumping in 2010</li>
</ul>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb608-1"><a href="geom-sf.html#cb608-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In knitting the book, dplyr operations like filter, mutate cause an error even though they would not produce any errors when you are running on an R session. The solution used here is to create the object to be used and save it, and then read it.</span></span>
<span id="cb608-2"><a href="geom-sf.html#cb608-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-3"><a href="geom-sf.html#cb608-3" aria-hidden="true" tabindex="-1"></a><span class="co"># KS_county_with_pumping &lt;-</span></span>
<span id="cb608-4"><a href="geom-sf.html#cb608-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   gw_KS_sf %&gt;%</span></span>
<span id="cb608-5"><a href="geom-sf.html#cb608-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   #--- only year == 2010 ---#</span></span>
<span id="cb608-6"><a href="geom-sf.html#cb608-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   dplyr::filter(year == 2010) %&gt;%</span></span>
<span id="cb608-7"><a href="geom-sf.html#cb608-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   #--- get total pumping by county ---#</span></span>
<span id="cb608-8"><a href="geom-sf.html#cb608-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   aggregate(., KS_county, sum, na.rm = TRUE)</span></span>
<span id="cb608-9"><a href="geom-sf.html#cb608-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-10"><a href="geom-sf.html#cb608-10" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(KS_county_with_pumping, &quot;Data/KS_county_with_pumping.rds&quot;)</span></span>
<span id="cb608-11"><a href="geom-sf.html#cb608-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-12"><a href="geom-sf.html#cb608-12" aria-hidden="true" tabindex="-1"></a>KS_county_with_pumping <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/KS_county_with_pumping.rds&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="geom-sf.html#cb609-1" aria-hidden="true" tabindex="-1"></a>KS_county_with_pumping <span class="ot">&lt;-</span></span>
<span id="cb609-2"><a href="geom-sf.html#cb609-2" aria-hidden="true" tabindex="-1"></a>  gw_KS_sf <span class="sc">%&gt;%</span></span>
<span id="cb609-3"><a href="geom-sf.html#cb609-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- only year == 2010 ---#</span></span>
<span id="cb609-4"><a href="geom-sf.html#cb609-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span>) <span class="sc">%&gt;%</span></span>
<span id="cb609-5"><a href="geom-sf.html#cb609-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- get total pumping by county ---#</span></span>
<span id="cb609-6"><a href="geom-sf.html#cb609-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate</span>(., KS_county, sum, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb609-7"><a href="geom-sf.html#cb609-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb609-8"><a href="geom-sf.html#cb609-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> KS_county_with_pumping) <span class="sc">+</span></span>
<span id="cb609-9"><a href="geom-sf.html#cb609-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> af_used))</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/count-map-e2-show-1.png" width="672" /></p>
</div>
</div>
<div id="plotting-multiple-spatial-objects-in-one-figure" class="section level3 hasAnchor" number="8.1.4">
<h3><span class="header-section-number">8.1.4</span> Plotting multiple spatial objects in one figure<a href="geom-sf.html#plotting-multiple-spatial-objects-in-one-figure" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can combine all the layers created by <code>geom_sf()</code> additively so they appear in a single map:</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="geom-sf.html#cb610-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb610-2"><a href="geom-sf.html#cb610-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- this one uses KS_wells ---#</span></span>
<span id="cb610-3"><a href="geom-sf.html#cb610-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> gw_KS_sf, <span class="at">size =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb610-4"><a href="geom-sf.html#cb610-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- this one uses KS_county ---#</span></span>
<span id="cb610-5"><a href="geom-sf.html#cb610-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_county) <span class="sc">+</span></span>
<span id="cb610-6"><a href="geom-sf.html#cb610-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- this one uses KS_railroads ---#</span></span>
<span id="cb610-7"><a href="geom-sf.html#cb610-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_railroads, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/g-multiple-1-1.png" width="672" /></p>
<p>Oops, you cannot see wells (points) in the figure. The order of <code>geom_sf()</code> matters. The layer added later will come on top of the preceding layers. That’s why wells are hidden beneath Kansas counties. So, let’s do this:</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="geom-sf.html#cb611-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> KS_county) <span class="sc">+</span></span>
<span id="cb611-2"><a href="geom-sf.html#cb611-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- this one uses KS_county ---#</span></span>
<span id="cb611-3"><a href="geom-sf.html#cb611-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb611-4"><a href="geom-sf.html#cb611-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- this one uses KS_county ---#</span></span>
<span id="cb611-5"><a href="geom-sf.html#cb611-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> gw_KS_sf, <span class="at">size =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb611-6"><a href="geom-sf.html#cb611-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- this one uses KS_railroads ---#</span></span>
<span id="cb611-7"><a href="geom-sf.html#cb611-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_railroads, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/g-multiple-2-1.png" width="672" /></p>
<p>Better.</p>
<p>Note that since you are using different datasets for each layer, you need to specify the dataset to use in each layer except for the first <code>geom_sf()</code> which inherits <code>data = KS_wells</code> from <code>ggplot(data = KS_wells)</code>. Of course, this will create exactly the same map:</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="geom-sf.html#cb612-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb612-2"><a href="geom-sf.html#cb612-2" aria-hidden="true" tabindex="-1"></a>  g_all <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb612-3"><a href="geom-sf.html#cb612-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#--- this one uses KS_county ---#</span></span>
<span id="cb612-4"><a href="geom-sf.html#cb612-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_county) <span class="sc">+</span></span>
<span id="cb612-5"><a href="geom-sf.html#cb612-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#--- this one uses KS_wells ---#</span></span>
<span id="cb612-6"><a href="geom-sf.html#cb612-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> gw_KS_sf, <span class="at">size =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb612-7"><a href="geom-sf.html#cb612-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">#--- this one uses KS_railroads ---#</span></span>
<span id="cb612-8"><a href="geom-sf.html#cb612-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_railroads, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb612-9"><a href="geom-sf.html#cb612-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/g-multiple-3-1.png" width="672" /></p>
<p>There is no rule that you need to supply data to <code>ggplot()</code>.<a href="#fn87" class="footnote-ref" id="fnref87"><sup>87</sup></a></p>
<p>Alternatively, you could add <code>fill = NA</code> to <code>geom_sf(data = KS_county)</code> instead of switching the order.</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="geom-sf.html#cb613-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb613-2"><a href="geom-sf.html#cb613-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- this one uses KS_wells ---#</span></span>
<span id="cb613-3"><a href="geom-sf.html#cb613-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> gw_KS_sf, <span class="at">size =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb613-4"><a href="geom-sf.html#cb613-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- this one uses KS_county ---#</span></span>
<span id="cb613-5"><a href="geom-sf.html#cb613-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_county, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb613-6"><a href="geom-sf.html#cb613-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- this one uses KS_railroads ---#</span></span>
<span id="cb613-7"><a href="geom-sf.html#cb613-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_railroads, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/g-multiple-4-1.png" width="672" /></p>
<p>This is fine as long as you do not intend to color-code counties.</p>
</div>
<div id="crs" class="section level3 hasAnchor" number="8.1.5">
<h3><span class="header-section-number">8.1.5</span> CRS<a href="geom-sf.html#crs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>ggplot()</code> uses the CRS of the <code>sf</code> to draw a map. For example, right now the CRS of <code>KS_county</code> is this:</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb614-1"><a href="geom-sf.html#cb614-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(KS_county)</span></code></pre></div>
<pre><code>Coordinate Reference System:
  User input: EPSG:4269 
  wkt:
GEOGCS[&quot;NAD83&quot;,
    DATUM[&quot;North_American_Datum_1983&quot;,
        SPHEROID[&quot;GRS 1980&quot;,6378137,298.257222101,
            AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY[&quot;EPSG&quot;,&quot;6269&quot;]],
    PRIMEM[&quot;Greenwich&quot;,0,
        AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],
    UNIT[&quot;degree&quot;,0.0174532925199433,
        AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],
    AUTHORITY[&quot;EPSG&quot;,&quot;4269&quot;]]</code></pre>
<p>Let’s convert the CRS to WGS 84/ UTM zone 14N (EPSG code: 32614), make a map, and compare the ones with different CRS side by side.</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="geom-sf.html#cb616-1" aria-hidden="true" tabindex="-1"></a>g_32614 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(KS_county, <span class="dv">32614</span>) <span class="sc">%&gt;%</span></span>
<span id="cb616-2"><a href="geom-sf.html#cb616-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> .) <span class="sc">+</span></span>
<span id="cb616-3"><a href="geom-sf.html#cb616-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()</span></code></pre></div>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="geom-sf.html#cb617-1" aria-hidden="true" tabindex="-1"></a>g_county <span class="sc">/</span> g_32614</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/patchwork-1.png" width="672" /></p>
<p>Alternatively, you could use <code>coord_sf()</code> to alter the CRS on the map, but not the CRS of the sf object itself.</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb618-1"><a href="geom-sf.html#cb618-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb618-2"><a href="geom-sf.html#cb618-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- epsg: 4269 ---#</span></span>
<span id="cb618-3"><a href="geom-sf.html#cb618-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_county) <span class="sc">+</span></span>
<span id="cb618-4"><a href="geom-sf.html#cb618-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="dv">32614</span>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/wells-map-crs-1.png" width="672" /></p>
<p>When multiple layers are used for map creation, the CRS of the first layer is applied for all the layers.</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="geom-sf.html#cb619-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb619-2"><a href="geom-sf.html#cb619-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- epsg: 32614 ---#</span></span>
<span id="cb619-3"><a href="geom-sf.html#cb619-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">st_transform</span>(KS_county, <span class="dv">32614</span>)) <span class="sc">+</span></span>
<span id="cb619-4"><a href="geom-sf.html#cb619-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- epsg: 4269 ---#</span></span>
<span id="cb619-5"><a href="geom-sf.html#cb619-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_railroads)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/wells-map-crs-order-1.png" width="672" /></p>
<p><code>coord_sf()</code> applies to all the layers.</p>
<div class="sourceCode" id="cb620"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb620-1"><a href="geom-sf.html#cb620-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb620-2"><a href="geom-sf.html#cb620-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- epsg: 32614 ---#</span></span>
<span id="cb620-3"><a href="geom-sf.html#cb620-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">st_transform</span>(KS_county, <span class="dv">32614</span>)) <span class="sc">+</span></span>
<span id="cb620-4"><a href="geom-sf.html#cb620-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- epsg: 4269 ---#</span></span>
<span id="cb620-5"><a href="geom-sf.html#cb620-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_railroads) <span class="sc">+</span></span>
<span id="cb620-6"><a href="geom-sf.html#cb620-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- using 4269 ---#</span></span>
<span id="cb620-7"><a href="geom-sf.html#cb620-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="dv">4269</span>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/wells-map-coodsf-1.png" width="672" /></p>
<p>Finally, you could limit the geographic scope of the map to be created by adding <code>xlim()</code> and <code>ylim()</code>.</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="geom-sf.html#cb621-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb621-2"><a href="geom-sf.html#cb621-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- epsg: 32614 ---#</span></span>
<span id="cb621-3"><a href="geom-sf.html#cb621-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">st_transform</span>(KS_county, <span class="dv">32614</span>)) <span class="sc">+</span></span>
<span id="cb621-4"><a href="geom-sf.html#cb621-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- epsg: 4269 ---#</span></span>
<span id="cb621-5"><a href="geom-sf.html#cb621-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_railroads) <span class="sc">+</span></span>
<span id="cb621-6"><a href="geom-sf.html#cb621-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- using 4269 ---#</span></span>
<span id="cb621-7"><a href="geom-sf.html#cb621-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="dv">4269</span>) <span class="sc">+</span></span>
<span id="cb621-8"><a href="geom-sf.html#cb621-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- limit the geographic scope of the map ---#</span></span>
<span id="cb621-9"><a href="geom-sf.html#cb621-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">99</span>, <span class="sc">-</span><span class="dv">97</span>) <span class="sc">+</span></span>
<span id="cb621-10"><a href="geom-sf.html#cb621-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">37</span>, <span class="dv">39</span>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/wells-map-coodsf-lim-1.png" width="672" /></p>
</div>
<div id="faceting" class="section level3 hasAnchor" number="8.1.6">
<h3><span class="header-section-number">8.1.6</span> Faceting<a href="geom-sf.html#faceting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Faceting splits the data into groups and generates a figure for each group, where the aesthetics of the figures are consistent across the groups. Faceting can be done using <code>facet_wrap()</code> or <code>facet_grid()</code>. Let’s try to create a map of groundwater use at wells by year where the points are color differentiated by the amount of groundwater use (<code>af_used</code>).</p>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb622-1"><a href="geom-sf.html#cb622-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb622-2"><a href="geom-sf.html#cb622-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- KS county boundary ---#</span></span>
<span id="cb622-3"><a href="geom-sf.html#cb622-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">st_transform</span>(KS_county, <span class="dv">32614</span>)) <span class="sc">+</span></span>
<span id="cb622-4"><a href="geom-sf.html#cb622-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- wells ---#</span></span>
<span id="cb622-5"><a href="geom-sf.html#cb622-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> gw_KS_sf, <span class="fu">aes</span>(<span class="at">color =</span> af_used)) <span class="sc">+</span></span>
<span id="cb622-6"><a href="geom-sf.html#cb622-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- facet by year (side by side) ---#</span></span>
<span id="cb622-7"><a href="geom-sf.html#cb622-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(. <span class="sc">~</span> year)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/facet-1-1.png" width="672" /></p>
<p>Note that the above code creates a single legend that applies to both panels, which allows you to compare values across panels (years here). Further, also note that the values of the faceting variable (<code>year</code>) are displayed in the gray strips above the maps. You can have panels stacked vertically by using the <code>ncol</code> option (or <code>nrow</code> also works) in <code>facet_wrap(. ~ year)</code> as follows:</p>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb623-1"><a href="geom-sf.html#cb623-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb623-2"><a href="geom-sf.html#cb623-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- KS county boundary ---#</span></span>
<span id="cb623-3"><a href="geom-sf.html#cb623-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">st_transform</span>(KS_county, <span class="dv">32614</span>)) <span class="sc">+</span></span>
<span id="cb623-4"><a href="geom-sf.html#cb623-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- wells ---#</span></span>
<span id="cb623-5"><a href="geom-sf.html#cb623-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> gw_KS_sf, <span class="fu">aes</span>(<span class="at">color =</span> af_used)) <span class="sc">+</span></span>
<span id="cb623-6"><a href="geom-sf.html#cb623-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- facet by year (side by side) ---#</span></span>
<span id="cb623-7"><a href="geom-sf.html#cb623-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(. <span class="sc">~</span> year, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/facet-2-1.png" width="672" /></p>
<p>Two-way faceting is possible by supplying a variable name (or expression) in place of <code>.</code> in <code>facet_wrap(. ~ year)</code>. The code below uses an expression <code>(af_used &gt; 200)</code> in place of <code>.</code>. This divides the dataset by whether water use is greater than 200 or not and by year.</p>
<div class="sourceCode" id="cb624"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb624-1"><a href="geom-sf.html#cb624-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb624-2"><a href="geom-sf.html#cb624-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- KS county boundary ---#</span></span>
<span id="cb624-3"><a href="geom-sf.html#cb624-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">st_transform</span>(KS_county, <span class="dv">32614</span>)) <span class="sc">+</span></span>
<span id="cb624-4"><a href="geom-sf.html#cb624-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- wells ---#</span></span>
<span id="cb624-5"><a href="geom-sf.html#cb624-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> gw_KS_sf, <span class="fu">aes</span>(<span class="at">color =</span> af_used)) <span class="sc">+</span></span>
<span id="cb624-6"><a href="geom-sf.html#cb624-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- facet by year (side by side) ---#</span></span>
<span id="cb624-7"><a href="geom-sf.html#cb624-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>((af_used <span class="sc">&gt;</span> <span class="dv">200</span>) <span class="sc">~</span> year)</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/facet-3-1.png" width="672" /></p>
<p>The values of the expression (<code>TRUE</code> or <code>FALSE</code>) appear in the gray strips, which is not informative. We will discuss in detail how to control texts in the strips section <a href="fine-tune.html#fine-tune">8.5</a>.</p>
<p>If you feel like the panels are too close to each other, you could provide more space between them using <code>panel.spacing</code> (both vertically and horizontally), <code>panel.spacing.x</code> (horizontally), and <code>panel.spacing.y</code> (vertically) options in <code>theme()</code>. Suppose you would like to place more space between the upper and lower panels, then you use <code>panel.spacing.y</code> like this:</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="geom-sf.html#cb625-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb625-2"><a href="geom-sf.html#cb625-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- KS county boundary ---#</span></span>
<span id="cb625-3"><a href="geom-sf.html#cb625-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">st_transform</span>(KS_county, <span class="dv">32614</span>)) <span class="sc">+</span></span>
<span id="cb625-4"><a href="geom-sf.html#cb625-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- wells ---#</span></span>
<span id="cb625-5"><a href="geom-sf.html#cb625-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> gw_KS_sf, <span class="fu">aes</span>(<span class="at">color =</span> af_used)) <span class="sc">+</span></span>
<span id="cb625-6"><a href="geom-sf.html#cb625-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- facet by year (side by side) ---#</span></span>
<span id="cb625-7"><a href="geom-sf.html#cb625-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>((af_used <span class="sc">&gt;</span> <span class="dv">200</span>) <span class="sc">~</span> year) <span class="sc">+</span></span>
<span id="cb625-8"><a href="geom-sf.html#cb625-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- add more space between panels ---#</span></span>
<span id="cb625-9"><a href="geom-sf.html#cb625-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.spacing.y =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&quot;lines&quot;</span>))</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/panel-spacing-1.png" width="672" /></p>
</div>
<div id="adding-texts-labels-on-a-map" class="section level3 hasAnchor" number="8.1.7">
<h3><span class="header-section-number">8.1.7</span> Adding texts (labels) on a map<a href="geom-sf.html#adding-texts-labels-on-a-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can add labels to a map using <code>geom_sf_text()</code> or <code>geom_sf_label()</code> and providing <code>aes(label = x)</code> inside it where <strong>x</strong> is the variable that contains labels to print on a map.</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb626-1"><a href="geom-sf.html#cb626-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb626-2"><a href="geom-sf.html#cb626-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- KS county boundary ---#</span></span>
<span id="cb626-3"><a href="geom-sf.html#cb626-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_county) <span class="sc">+</span></span>
<span id="cb626-4"><a href="geom-sf.html#cb626-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(</span>
<span id="cb626-5"><a href="geom-sf.html#cb626-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> KS_county,</span>
<span id="cb626-6"><a href="geom-sf.html#cb626-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> NAME),</span>
<span id="cb626-7"><a href="geom-sf.html#cb626-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb626-8"><a href="geom-sf.html#cb626-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;blue&quot;</span></span>
<span id="cb626-9"><a href="geom-sf.html#cb626-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/add-labels-1.png" width="672" /></p>
<p>If you would like to have overlapping labels not printed, you can add <code>check_overlap = TRUE</code>.</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="geom-sf.html#cb627-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb627-2"><a href="geom-sf.html#cb627-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- KS county boundary ---#</span></span>
<span id="cb627-3"><a href="geom-sf.html#cb627-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_county) <span class="sc">+</span></span>
<span id="cb627-4"><a href="geom-sf.html#cb627-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(</span>
<span id="cb627-5"><a href="geom-sf.html#cb627-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> KS_county,</span>
<span id="cb627-6"><a href="geom-sf.html#cb627-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> NAME),</span>
<span id="cb627-7"><a href="geom-sf.html#cb627-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb627-8"><a href="geom-sf.html#cb627-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb627-9"><a href="geom-sf.html#cb627-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;blue&quot;</span></span>
<span id="cb627-10"><a href="geom-sf.html#cb627-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/add-labels-overlap-1.png" width="672" /></p>
<p>The <code>nudge_x</code> and <code>nudge_y</code> options let you shift the labels.</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb628-1"><a href="geom-sf.html#cb628-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb628-2"><a href="geom-sf.html#cb628-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- KS county boundary ---#</span></span>
<span id="cb628-3"><a href="geom-sf.html#cb628-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_county) <span class="sc">+</span></span>
<span id="cb628-4"><a href="geom-sf.html#cb628-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(</span>
<span id="cb628-5"><a href="geom-sf.html#cb628-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> KS_county,</span>
<span id="cb628-6"><a href="geom-sf.html#cb628-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> NAME),</span>
<span id="cb628-7"><a href="geom-sf.html#cb628-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb628-8"><a href="geom-sf.html#cb628-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb628-9"><a href="geom-sf.html#cb628-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb628-10"><a href="geom-sf.html#cb628-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="sc">-</span><span class="fl">0.1</span>,</span>
<span id="cb628-11"><a href="geom-sf.html#cb628-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_y =</span> <span class="fl">0.1</span></span>
<span id="cb628-12"><a href="geom-sf.html#cb628-12" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/nudge-1.png" width="672" /></p>
<p>If you would like a fine control on a few objects, you can always work on them separately.</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="geom-sf.html#cb629-1" aria-hidden="true" tabindex="-1"></a>Cheyenne <span class="ot">&lt;-</span> <span class="fu">filter</span>(KS_county, NAME <span class="sc">==</span> <span class="st">&quot;Cheyenne&quot;</span>)</span>
<span id="cb629-2"><a href="geom-sf.html#cb629-2" aria-hidden="true" tabindex="-1"></a>KS_less_Cheyenne <span class="ot">&lt;-</span> <span class="fu">filter</span>(KS_county, NAME <span class="sc">!=</span> <span class="st">&quot;Cheyenne&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb630"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb630-1"><a href="geom-sf.html#cb630-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb630-2"><a href="geom-sf.html#cb630-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- KS county boundary ---#</span></span>
<span id="cb630-3"><a href="geom-sf.html#cb630-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_county) <span class="sc">+</span></span>
<span id="cb630-4"><a href="geom-sf.html#cb630-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(</span>
<span id="cb630-5"><a href="geom-sf.html#cb630-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> KS_less_Cheyenne,</span>
<span id="cb630-6"><a href="geom-sf.html#cb630-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> NAME),</span>
<span id="cb630-7"><a href="geom-sf.html#cb630-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb630-8"><a href="geom-sf.html#cb630-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb630-9"><a href="geom-sf.html#cb630-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb630-10"><a href="geom-sf.html#cb630-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="sc">-</span><span class="fl">0.1</span>,</span>
<span id="cb630-11"><a href="geom-sf.html#cb630-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_y =</span> <span class="fl">0.1</span></span>
<span id="cb630-12"><a href="geom-sf.html#cb630-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb630-13"><a href="geom-sf.html#cb630-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(</span>
<span id="cb630-14"><a href="geom-sf.html#cb630-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> Cheyenne,</span>
<span id="cb630-15"><a href="geom-sf.html#cb630-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> NAME),</span>
<span id="cb630-16"><a href="geom-sf.html#cb630-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">2.5</span>,</span>
<span id="cb630-17"><a href="geom-sf.html#cb630-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb630-18"><a href="geom-sf.html#cb630-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_y =</span> <span class="fl">0.2</span></span>
<span id="cb630-19"><a href="geom-sf.html#cb630-19" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/nudge-sep-1.png" width="672" /></p>
<p>You could also use <code>annotate()</code> to place texts on a map, which can be useful if you would like to place arbitrary texts that are not part of <code>sf</code> object.</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="geom-sf.html#cb631-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb631-2"><a href="geom-sf.html#cb631-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- KS county boundary ---#</span></span>
<span id="cb631-3"><a href="geom-sf.html#cb631-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> KS_county) <span class="sc">+</span></span>
<span id="cb631-4"><a href="geom-sf.html#cb631-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(</span>
<span id="cb631-5"><a href="geom-sf.html#cb631-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> KS_less_Cheyenne,</span>
<span id="cb631-6"><a href="geom-sf.html#cb631-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> NAME),</span>
<span id="cb631-7"><a href="geom-sf.html#cb631-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb631-8"><a href="geom-sf.html#cb631-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb631-9"><a href="geom-sf.html#cb631-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb631-10"><a href="geom-sf.html#cb631-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="sc">-</span><span class="fl">0.1</span>,</span>
<span id="cb631-11"><a href="geom-sf.html#cb631-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_y =</span> <span class="fl">0.1</span></span>
<span id="cb631-12"><a href="geom-sf.html#cb631-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb631-13"><a href="geom-sf.html#cb631-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- use annotate to add texts on the map ---#</span></span>
<span id="cb631-14"><a href="geom-sf.html#cb631-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb631-15"><a href="geom-sf.html#cb631-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">&quot;text&quot;</span>,</span>
<span id="cb631-16"><a href="geom-sf.html#cb631-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="sc">-</span><span class="dv">102</span>,</span>
<span id="cb631-17"><a href="geom-sf.html#cb631-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fl">39.8</span>,</span>
<span id="cb631-18"><a href="geom-sf.html#cb631-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb631-19"><a href="geom-sf.html#cb631-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;Cheyennes&quot;</span>,</span>
<span id="cb631-20"><a href="geom-sf.html#cb631-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;red&quot;</span></span>
<span id="cb631-21"><a href="geom-sf.html#cb631-21" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="R_GIS_Book_files/figure-html/nudge-sep-annotate-1.png" width="672" /></p>
<p>As you can see, you need to tell where the texts should be placed with <code>x</code> and <code>y</code>, provide the texts you want on the map to <code>label</code>.</p>
<!--
#/*=================================================*/
#' # Raster data visualization: `geom_raster()`
#/*=================================================*/
-->
</div>
</div>
<div class="footnotes">
<hr />
<ol start="87">
<li id="fn87"><p>Supplying data in <code>ggplot()</code> can be convenient if you are creating multiple <code>geom</code> from the data because you do not need to tell what data to use in each of the <code>geom</code>s.<a href="geom-sf.html#fnref87" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="before-you-start-7.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geom-raster.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"toc_depth": 3,
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
